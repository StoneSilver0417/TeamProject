<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mypage</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="header.css" /> 
    <link rel="stylesheet" href="mypage.css" />
    <link rel="stylesheet" href="footer.css" />
    <script src="script.js"></script>
    <script
      src="https://kit.fontawesome.com/267f657aa0.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
      integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
    // default: 내 문제 - 내가 푼 문제
    $(document).ready(function () {
        $.ajax({
          url: 'http://127.0.0.1:5500/mypage-quest.html',
          type: 'GET',
          success: function (data) {
            $('#replace-content').html(data);
          },
        }); 
    });

      function myQuestBtn() {
        $.ajax({
          url: 'http://127.0.0.1:5500/mypage-quest.html',
          type: 'GET',
          success: function (data) {
            $('#replace-content').html(data);
          },
        });
      }

      function myActiveBtn() {
        $.ajax({
          url: 'http://127.0.0.1:5500/mypage-activity.html',
          type: 'GET',
          success: function (data) {
            $('#replace-content').html(data);
          },
        });
      }

      function myLevelBtn() {
        $.ajax({
          url: 'http://127.0.0.1:5500/mypage-level.html',
          type: 'GET',
          success: function (data) {
            $('#replace-content').html(data);
          },
        });
      }
    </script>
  </head>
  <body>    
    <!-- header -->
    <header>
        <div id="header__top">
          <a href="/">
            <h1 id="header__logo">clever</h1>
          </a>
          <div id="header__actions">
            <!-- 검색 기능 -->
            <form action="/search" id="header__actions-search">
              <input type="text" placeholder="검색어를 입력해주세요." />
              <button type="submit">
                <img src="imgs/header/search.png" alt="search" />
              </button>
            </form>
            <!-- 유저 상태에 따름 -->
            <div id="header__actions-user">
              <!-- 로그인 안된 경우 버튼 -->
              <!-- <a href="/login" th:if="${session?.user = null}" id="loginAndRegister">로그인/회원가입</a> -->
    
              <!-- 로그인 한 경우 버튼 -->
              <div id="user-profile" th:if="${session?.user != null}">
                <!-- 레벨 -->
                <div id="profile__badge">
                  <a href="http://127.0.0.1:5500/mypage.html">
                  <img src="imgs/badge/master.svg" /></a>
                </div>
                <!-- 프로필 -->
                <div id="profile" >
                  <div onclick="profileOnclick()" class="profileBtn" id="profile__info">
                    <img
                      id="profile__img"
                      src="imgs/profile-img.png"
                      alt="profile img"
                    />
                    <p  id="profile__name">오다원</p>
                  </div>
                  <div id="profileDropdown" class="profile-dropdown">
                    <ul>
                      <li><a href="http://127.0.0.1:5500/mypage.html">프로필</a></li>
                      <li><a href="http://127.0.0.1:5500/mypage-setting.html">설정</a></li>
                      <li><div class="divider"></div></li>
                      <li><a href="/logout">로그아웃</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <!-- navbar -->
      <nav id="header__nav">
        <ul>
          <li class="category" tab-index="0">
            <a href="/list">전체</a>
          </li>
          <li class="category" tab-index="0">
            <p>국가기술자격시험</p>
            <ul class="sub-category">
              <li><a href="/list">가나아러 지</a></li>
              <li><a href="/list">국가기술자격시험</a></li>
              <li><a href="/list">Su국가기술자 격시험</a></li>
              <li><a href="/list">Su국가기술자격시 험m 4</a></li>
              <li><a href="/list">Sub I국가기술자격시 험tem 5</a></li>
              <li><a href="/list">국가기술자격시험 ㄴㄴb Item 6</a></li>
            </ul>
          </li>
          <li class="category" tab-index="0">
            <p>기타 IT·전산 시험</p>
            <ul class="sub-category">
              <li><a href="/list">기타 IT·전산 시험</a></li>
              <li><a href="/list">기타 IT·전산 시험</a></li>
              <li><a href="/list">기타 IT·전산 시험</a></li>
              <li><a href="/list">Sub It IT·전산  IT·전산 em 6</a></li>
            </ul>
          </li>
          <li class="category" tab-index="0">
            <p>공무원 전산직</p>
            <ul class="sub-category">
              <li><a href="/list">Sub Item 1</a></li>
              <li><a href="/list">공무공무원 전산직원 전산직</a></li>
              <li><a href="/list">Su공무원 전산직 5</a></li>
              <li><a href="/list">Su공무원 전산직b Item 6</a></li>
            </ul>
          </li>
          <li class="category" tab-index="0">
            <p>유저 등록 시험 </p>
            <ul class="sub-category">
              <li><a href="/list">Sub Item 1</a></li>
              <li><a href="/list">공무공무원 전산직원 전산직</a></li>
              <li><a href="/list">Su공무원 전산직 5</a></li>
              <li><a href="/list">Su공무원 전산직b Item 6</a></li>
            </ul>
          </li>
          <li class="category" tab-index="0">
            <p>파ㅣㅏ렂</p>
            <ul class="sub-category">
              <li><a href="/list">Sub Item 1</a></li>
              <li><a href="/list">Sub Item 2</a></li>
              <li><a href="/list">Sub Item 5</a></li>
              <li><a href="/list">Sub Item 6</a></li>
            </ul>
          </li>
          <li class="category" tab-index="0">
            <p>기타 시험</p>
            <ul class="sub-category">
              <li><a href="/list">Sub Item 1</a></li>
              <li><a href="/list">Sub Item 2</a></li>
              <li><a href="/list">Sub Item 5</a></li>
              <li><a href="/list">Sub Item 6</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
      </header>  
      <script>
       function profileOnclick() {
        document.getElementById('profileDropdown').classList.toggle('show'); 
        window.onclick = function (event) {
        if (!event.target.matches('#profileDropdown')) {
          if (openDropdown.classList.contains('show')) { 
                 document.getElementById('profileDropdown').classList.remove('show');  
        }
      };
        var dropdowns = document.getElementsByClassName('profile-dropdown');
          var i;
          for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) { 
            }
          }
      } 
    }
      </script> 
    <hr> 

    <!-- mypage -->
    <section id="mypage">
      <!-- user profile -->
      <div class="mypage__profile">
        <!-- user profile image -->
        <img src="imgs/profile-img.png" />

        <div class="mypage__profile-info">
          <div class="usernameAndsetting__wrapper">
            <!-- user name -->
            <h1>오다원</h1>
            <!-- setting icon -->
            <a href="http://127.0.0.1:5500/mypage-setting.html">
              <img src="imgs/mypage/settings.png" />
            </a>
          </div>
          <!-- user regdate -->
          <p>3일 전 가입</p>
          <!-- user badge -->
          <div class="badge">
            <img src="imgs/badge/master.svg" />
            <p>Master</p>
          </div>
        </div>
      </div>

      <!-- user activity -->
      <nav class="mypage__list">
        <!-- tab navigation -->
        <p onclick="myQuestBtn()" class="active">내 문제</p> 
        <p onclick="myActiveBtn()">내 활동</p> 
        <p onclick="myLevelBtn()">등급</p>  
        <div class="marker" target="_blank"></div> 
      </nav>
      <div id="navbar__divider"></div>  
      <div id="replace-content"></div>
      <!-- !!!!!!!! board 색깔 수정 필요 !!!!!!!!!! --> 
    </section>
    <hr>
    <script>
        const marker = document.querySelector(".marker");
        const item = document.querySelectorAll(".mypage__list p");
 
        function indicator(e) {
        marker.style.left = e.offsetLeft + "px";
        marker.style.width = e.offsetWidth + "px";

        //   e.classList.remove('active');   
        }

        item.forEach((event) => { 
            // event.currentTarget.classList.remove('active');   

            event.addEventListener("click", (e) => {
            indicator(e.target);
            e.target.classList.add('active');

            console.log(e.target);
        });
        });
    </script>
    
    <!-- footer -->
    <footer>
        <div class="footer__main">
          <div id="footer__logo">clever</div>
          <div id="footer_describe">
            <h1>문제은행 어저구</h1>
            <div class="madePeople">
              <img src="imgs/footer/member.svg"   />
              <p>김진영 강경운 심우석 오다원</p>
            </div>
          </div>
        </div>
        <div class="footer__side">
          <p class="copyright">Copyright © 2022 By Clever. All Rights Reserved.</p>
          <div class="footer_icons">
            <a href="https://github.com/StoneSilver0417/TeamPJ.git"><img src="imgs/footer/github.svg"></a>
          </div>
        </div>
    </footer>
    </body>
</html>
